{"version":3,"file":"pagination.js","sources":["../../src/lib.js","../../src/modules/pagination.js"],"sourcesContent":["export function addClass (el, list = []) {\n    if (!Array.isArray(list)) list = [list]\n\n    list.forEach(clz => (!el.classList.contains(clz) && el.classList.add(clz)))\n}\n\nexport function removeClass (el, list = []) {\n    if (!Array.isArray(list)) list = [list]\n\n    list.forEach(clz => (el.classList.contains(clz) && el.classList.remove(clz)))\n}\n\nexport function attachListener (el, evtName, handler, opts) {\n    el.addEventListener(evtName, handler, opts)\n}\n\nexport function detachListener (el, evtName, handler) {\n    el.removeEventListener(evtName, handler)\n}\n\nexport function removeAttr (el, attr) {\n    el.removeAttribute(attr)\n}\n\nexport function detectTouch () {\n    return Boolean(\n        'ontouchstart' in window\n        || navigator.maxTouchPoints > 0\n        || navigator.msMaxTouchPoints > 0\n        || window.DocumentTouch && document instanceof DocumentTouch\n    )\n}\n\n/**\n * get Element transform\n * @param {HTMLElement} el\n * @param {Boolean} isHorizontal\n * @returns {Number}\n */\nexport function getTranslate (el, isHorizontal) {\n    const matrix = getComputedStyle(el).transform.replace(/[a-z]|\\(|\\)|\\s/g, '').split(',').map(parseFloat)\n    let arr\n\n    if (matrix.length === 16) {\n        arr = matrix.slice(12, 14)\n    } else if (matrix.length === 6) {\n        arr = matrix.slice(4, 6)\n    }\n    return arr[isHorizontal ? 0 : 1] || 0\n}\n","import {\n    addClass,\n    removeClass\n} from '../lib.js'\n\nexport default function SwiperPluginPagination (instance) {\n    instance.on('before-init', tinyswiper => {\n        const { config } = tinyswiper\n\n        if (config.pagination) {\n            config.pagination = {\n                clickable: false,\n                bulletClass: 'swiper-pagination-bullet',\n                bulletActiveClass: 'swiper-pagination-bullet-active',\n                ...config.pagination\n            }\n        }\n    })\n\n    instance.on('after-init', tinyswiper => {\n        const { config } = tinyswiper\n\n        if (!config.pagination) return\n\n        const {\n            bulletClass,\n            bulletActiveClass\n        } = config.pagination\n\n        const $pagination = typeof config.pagination.el === 'string'\n            ? document.body.querySelector(config.pagination.el)\n            : config.pagination.el\n        const $pageList = []\n        const $group = document.createDocumentFragment()\n\n        config.excludeElements.push($pagination)\n        tinyswiper.$pagination = $pagination\n        tinyswiper.$pageList = $pageList\n\n        tinyswiper.$list.forEach((item, index) => {\n            const $page = document.createElement('div')\n\n            addClass(\n                $page,\n                index === tinyswiper.index ? [bulletClass, bulletActiveClass] : bulletClass\n            )\n            $pageList.push($page)\n            $group.appendChild($page)\n        })\n\n        $pagination.appendChild($group)\n\n        if (config.pagination.clickable) {\n            $pagination.addEventListener('click', e => {\n                tinyswiper.scroll($pageList.indexOf(e.target))\n                e.stopPropagation()\n            })\n        }\n    })\n\n    instance.on('after-destroy', tinyswiper => {\n        const { config } = tinyswiper\n\n        if (!config.pagination) return\n        tinyswiper.$pagination.innerHTML = ''\n        tinyswiper.$pageList = []\n        tinyswiper.$pagination = null\n    })\n\n    instance.on('after-slide', (currentIndex, tinyswiper) => {\n        const { bulletActiveClass } = tinyswiper.config.pagination\n\n        tinyswiper.$pageList && tinyswiper.$pageList.forEach(($page, index) => {\n            if (index === currentIndex) {\n                addClass($page, bulletActiveClass)\n            } else {\n                removeClass($page, bulletActiveClass)\n            }\n        })\n    })\n}\n"],"names":["addClass","el","list","Array","isArray","forEach","clz","classList","contains","add","removeClass","remove","SwiperPluginPagination","instance","on","tinyswiper","config","pagination","clickable","bulletClass","bulletActiveClass","$pagination","document","body","querySelector","$pageList","$group","createDocumentFragment","excludeElements","push","$list","item","index","$page","createElement","appendChild","addEventListener","e","scroll","indexOf","target","stopPropagation","innerHTML","currentIndex"],"mappings":"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"}